<div ng-init="preProcessComments(child)" class="blg-comment-padding padding">
<div ng-repeat="child in child.children">
<div ng-if="child.$$load">
    <div class="item item-stable blg-item-comment item-button-left item-button-right">
        <button class="button button-light blg-avatar-button" ng-click="loadJournal(child.postername)">
            <div class="blg-avatar-cropper">
                <div class="blg-avatar-rounded"
                    style = 'background-image: url({{child.$$userpic}})'>
                </div>
            </div>
        </button>

        <p class="blg-right">{{child.datepostunix | unixFormat}}</p>
        <h2>{{child.$$subject}}</h2>
        <p>{{child.postername}}</p>

        <div class="buttons blg-comment-buttons">
            <button class="button button-icon icon ion-ios7-compose-outline"
                ng-class="{disabled: !canPostComment()}"
                ng-click="openCommentEdit(journal,post.ditemid,child)">
            </button>
            <button class="button button-icon icon ion-ios7-trash-outline"
                ng-class="{disabled: !canDeleteComment(child)}"
                ng-click="deleteComment(journal,post.ditemid,child.dtalkid)">
            </button>
            <button class="button button-icon icon {{child.$$show ? 'ion-minus' : 'ion-plus'}}"
                ng-click="toggleComment(child)"
                ng-show="child.children">
            </button>
        </div>
    </div>
    <ion-item class="blg-content blg-html">
        <pre
             ng-bind-html="child.$$body"
             ng-click="processLink($event)">
        </pre>
    </ion-item>
    <div ng-if="child.$$show">
        <ng-include ng-if="child.children" src="'app/post/comment.html'">
        </ng-include>
    </div>
</div>
</div>
<ion-item
    ng-if="child.$$load_more"
    class="button icon-left ion-ios7-chatboxes-outline button-positive"
    ng-click="loadComments(child)">
    More comments
</ion-item>
</div>
